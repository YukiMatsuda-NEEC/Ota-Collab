(window.webpackJsonp=window.webpackJsonp||[]).push([[17,6,11,12],{259:function(e,t,r){e.exports=r.p+"img/placeholder.ef09bcb.png"},267:function(e,t,r){var content=r(287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(107).default)("bc0cdeb6",content,!0,{sourceMap:!1})},268:function(e,t,r){var content=r(289);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(107).default)("3489b54c",content,!0,{sourceMap:!1})},269:function(e,t,r){var content=r(291);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(107).default)("d3e6dba8",content,!0,{sourceMap:!1})},286:function(e,t,r){"use strict";r(267)},287:function(e,t,r){var n=r(106)(!1);n.push([e.i,"h1[data-v-e8477dee],h2[data-v-e8477dee],h2 h1 p[data-v-e8477dee]{color:#000}span[data-v-e8477dee]{color:red}.offer .profile[data-v-e8477dee]{border:1px solid #000;padding:0;margin:20px auto auto;border-radius:13px;width:252px;box-sizing:252,266}.offer .profile-icon[data-v-e8477dee]{display:flex;-o-object-fit:cover;object-fit:cover;width:252px;height:150px;border-radius:13px 13px 0 60px}.offer div.profile_industry[data-v-e8477dee],.offer div.profile_store[data-v-e8477dee]{text-align:right;margin-right:20px}.offer div.profile_store[data-v-e8477dee]{font-size:25px}.offer .approval_message[data-v-e8477dee]{text-align:right;margin-right:20px;color:#3cbe3c}",""]),e.exports=n},288:function(e,t,r){"use strict";r(268)},289:function(e,t,r){var n=r(106)(!1);n.push([e.i,".offer .profile[data-v-255fb899]{border:1px solid #000;padding:0 px;margin:20px auto auto;border-radius:13px;width:252px;height:330}.offer .profile-icon[data-v-255fb899]{display:flex;-o-object-fit:cover;object-fit:cover;width:252px;height:150px;border-radius:13px 13px 0 60px}.offer div.info div.profile_industry[data-v-255fb899],.offer div.info div.profile_store[data-v-255fb899]{text-align:right;margin-right:20px}.offer div.info div.profile_store[data-v-255fb899]{font-size:25px}.offer div .message[data-v-255fb899]{background-color:#d9d9d9;width:222px;height:40px;border-radius:4px;overflow-y:scroll;margin:auto auto 20px}",""]),e.exports=n},290:function(e,t,r){"use strict";r(269)},291:function(e,t,r){var n=r(106)(!1);n.push([e.i,"span[data-v-156e6140]{color:red}.offer .profile[data-v-156e6140]{border:1px solid #000;padding:0 px;margin:20px auto auto;border-radius:13px;width:252px;height:132}.offer .profile-icon[data-v-156e6140]{display:flex;-o-object-fit:cover;object-fit:cover;width:252px;height:92px;border-radius:13px 13px 0 45px}.offer div.profile_store[data-v-156e6140]{font-size:25px}.offer .succeeded_message[data-v-156e6140],.offer .wait_message[data-v-156e6140],.offer div.profile_store[data-v-156e6140]{text-align:right;margin-right:20px}.offer .succeeded_message[data-v-156e6140]{color:#3cbe3c}.offer .rejected_message[data-v-156e6140]{text-align:right;margin-right:20px;color:red}",""]),e.exports=n},302:function(e,t,r){"use strict";r.r(t);r(28),r(188),r(40);var n=r(262),c={name:"OfferCard",props:{offerReceived:{type:Object,required:!1,default:!1}},data:function(){return{industry:"小売り業",store:"海苔屋",day:4,approvalMessage:"",iconUrl:""}},mounted:function(){this.checkApproval(),this.getIconUrl()},methods:{checkApproval:function(){this.offerReceived.is_succeeded&&(this.approvalMessage="承認しました")},getIconUrl:function(){var e=this,t=this.offerReceived.userNum,r=Object(n.b)(),c=Object(n.d)(r,"/"+t);Object(n.c)(c).then((function(c){for(var i=0;c.items.length>i;i++){"Icon"==c.items[i].name.split(".")[0]&&Object(n.a)(Object(n.d)(r,t+"/"+c.items[i].name)).then((function(t){e.iconUrl=t})).catch((function(e){}))}}))}}},o=(r(286),r(46)),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"offer"},[n("div",{staticClass:"profile"},[n("img",{staticClass:"profile-icon",attrs:{src:this.iconUrl?this.iconUrl:r(259),alt:"プロフィールアイコン"}}),e._v(" "),n("div",{staticClass:"profile_industry"},[e._v(e._s(e.offerReceived.industry))]),e._v(" "),n("div",{staticClass:"profile_store"},[e._v(e._s(e.offerReceived.shop_name))]),e._v(" "),n("div",{staticClass:"approval_message"},[e._v(e._s(e.approvalMessage))])])])}),[],!1,null,"e8477dee",null);t.default=component.exports},309:function(e,t,r){"use strict";r.r(t);r(28),r(188),r(40);var n=r(262),c={name:"OfferCard",props:{recommend:{type:Object,required:!1,default:!1}},data:function(){return{industry:"小売り業",shop_name:"海苔屋",message:"",iconUrl:""}},mounted:function(){this.getIconUrl()},methods:{getIconUrl:function(){var e=this,t=this.recommend.userNum,r=Object(n.b)(),c=Object(n.d)(r,"/"+t);Object(n.c)(c).then((function(c){for(var i=0;c.items.length>i;i++){"Icon"==c.items[i].name.split(".")[0]&&Object(n.a)(Object(n.d)(r,t+"/"+c.items[i].name)).then((function(t){e.iconUrl=t})).catch((function(e){}))}}))}}},o=(r(288),r(46)),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"offer"},[n("div",{staticClass:"profile"},[n("img",{staticClass:"profile-icon",attrs:{src:this.iconUrl?this.iconUrl:r(259),alt:"プロフィールアイコン"}}),e._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"profile_industry"},[e._v(e._s(e.recommend.industry))]),e._v(" "),n("div",{staticClass:"profile_store"},[e._v(e._s(e.recommend.shop_name))])]),e._v(" "),n("div",{staticClass:"message"},[n("p",[n("span",[e._v(e._s(e.recommend.message))])])])])])}),[],!1,null,"255fb899",null);t.default=component.exports},310:function(e,t,r){"use strict";r.r(t);r(28),r(188),r(40);var n=r(262),c={name:"OfferCard",props:{offerSubmitted:{type:Object,required:!1,default:!1}},data:function(){return{store:"海苔屋",day:4,waitMessage:"（返信待ちです）",succeededMessage:"",rejectedMessage:"",iconUrl:""}},mounted:function(){this.checkReply(),this.getIconUrl()},methods:{checkReply:function(){this.offerSubmitted.is_succeeded?(this.waitMessage="",this.succeededMessage="承認されました！"):this.offerSubmitted.is_rejected&&(this.waitMessage="",this.rejectedMessage="拒否されました")},getIconUrl:function(){var e=this,t=this.offerSubmitted.userNum,r=Object(n.b)(),c=Object(n.d)(r,"/"+t);Object(n.c)(c).then((function(c){for(var i=0;c.items.length>i;i++){"Icon"==c.items[i].name.split(".")[0]&&Object(n.a)(Object(n.d)(r,t+"/"+c.items[i].name)).then((function(t){e.iconUrl=t})).catch((function(e){}))}}))}}},o=(r(290),r(46)),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"offer"},[n("div",{staticClass:"profile"},[n("img",{staticClass:"profile-icon",attrs:{src:this.iconUrl?this.iconUrl:r(259),alt:"プロフィールアイコン"}}),e._v(" "),n("div",{staticClass:"profile_store"},[e._v(e._s(e.offerSubmitted.shop_name))]),e._v(" "),n("div",{staticClass:"wait_message"},[e._v(e._s(e.waitMessage))]),e._v(" "),n("div",{staticClass:"succeeded_message"},[e._v(e._s(e.succeededMessage))]),e._v(" "),n("div",{staticClass:"rejected_message"},[e._v(e._s(e.rejectedMessage))])])])}),[],!1,null,"156e6140",null);t.default=component.exports},341:function(e,t,r){var content=r(408);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(107).default)("26c1cfe8",content,!0,{sourceMap:!1})},407:function(e,t,r){"use strict";r(341)},408:function(e,t,r){var n=r(106)(!1);n.push([e.i,".connecting[data-v-6e70ced0]{text-align:center;margin-top:3em}.mode[data-v-6e70ced0]{text-align:center;height:50px;justify-content:space-evenly;display:flex;background:#acacac;border-radius:0 0 13px 13px}section button[data-v-6e70ced0]{display:inline-block;font-size:14px;border-radius:5px}.button_selected[data-v-6e70ced0]{background-color:#90ee90}header[data-v-6e70ced0]{text-align:center}header h2[data-v-6e70ced0]{font-size:18px;margin:9px,0}",""]),e.exports=n},516:function(e,t,r){"use strict";r.r(t);var n=r(10),c=(r(15),r(32),r(60),r(302)),o=r(309),d=r(310),f=r(285),l=r(303),m={name:"",components:{OfferCard:c.default,recommendCard:o.default,replyWait:d.default},data:function(){return{day:26,userName:"田中",waitReceived:!0,waitRecommend:!0,waitSubmitted:!0,displayType:2,userNum:"",recommends:[],offersSubmitted:[],offersReceived:[]}},mounted:function(){this.checklogin(),this.checkDisplayType(),this.matching(),this.getOffersReceived(),this.getOffersSubmitted()},methods:{change1:function(){this.displayType=1},change2:function(){this.displayType=2},change3:function(){this.displayType=3},checklogin:function(){var e=this,t=Object(l.b)();Object(l.c)(t,function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r||e.$router.push({name:"login",params:{returnPage:"offer"}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},checkDisplayType:function(){this.$route.params.displayType&&(this.displayType=this.$route.params.displayType)},getOffersReceived:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",c=Object(l.b)(),Object(l.c)(c,function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(c){var o,d,q;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=13;break}return r=c.uid,o=Object(f.f)(),t.next=5,Object(f.d)(Object(f.c)(o,"uid_to_num",r));case 5:return(d=t.sent).exists()?e.userNum=d.data().num:console.log("No such document."),q=Object(f.g)(Object(f.b)(o,"offers"),Object(f.k)("to","==",e.userNum)),t.next=10,Object(f.e)(q);case 10:t.sent.forEach(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.data().is_rejected){t.next=8;break}return console.log("受信："+r.data().from),t.next=4,e.getUserData(r.data().from);case 4:(n=t.sent).offerID=r.id,n.is_succeeded=r.data().is_succeeded,e.offersReceived.push(n);case 8:case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.waitReceived=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},matching:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",c=Object(l.b)(),Object(l.c)(c,function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(c){var o,d,l,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=24;break}return r=c.uid,o=Object(f.f)(),t.next=5,Object(f.d)(Object(f.c)(o,"uid_to_num",r));case 5:return(d=t.sent).exists()?e.userNum=d.data().num:console.log("No such document."),l=[],t.next=10,Object(f.e)(Object(f.b)(o,"offers"));case 10:return t.sent.forEach(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.data().from==e.userNum?l.push(r.data().to):r.data().to==e.userNum&&l.push(r.data().from);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.prev=12,t.next=15,e.$axios.$get("/matching/".concat(e.userNum));case 15:data=t.sent,console.log("おすすめ："+data.offers),data.offers.forEach(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==l.indexOf(String(r))){t.next=5;break}return t.next=3,e.getUserData(String(r));case 3:n=t.sent,e.recommends.push(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.waitRecommend=!1,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(12),console.error(t.t0);case 24:case"end":return t.stop()}}),t,null,[[12,21]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},getOffersSubmitted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",c=Object(l.b)(),Object(l.c)(c,function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(c){var o,d,q;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=13;break}return r=c.uid,o=Object(f.f)(),t.next=5,Object(f.d)(Object(f.c)(o,"uid_to_num",r));case 5:return(d=t.sent).exists()?e.userNum=d.data().num:console.log("No such document."),q=Object(f.g)(Object(f.b)(o,"offers"),Object(f.k)("from","==",e.userNum)),t.next=10,Object(f.e)(q);case 10:t.sent.forEach(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("送信済み："+r.data().to),t.next=3,e.getUserData(r.data().to);case 3:(n=t.sent).offerID=r.id,n.is_succeeded=r.data().is_succeeded,n.is_rejected=r.data().is_rejected,e.offersSubmitted.push(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.waitSubmitted=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},getUserData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},n=Object(f.f)(),t.next=4,Object(f.d)(Object(f.c)(n,"users",e));case 4:if(!(c=t.sent).exists()){t.next=11;break}return data=c.data(),r={userNum:e,address:data.address,industry:data.industry,introduction:data.introduction,line_administrator:data.line_administrator,line_furigana:data.line_furigana,message:data.message,representative:data.representative,shop_name:data.shop_name},t.abrupt("return",r);case 11:return console.log("No such document."),t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))()},openReceivedProfile:function(e,t,r){this.$router.push({name:"offerProfile",params:{userNum:e,offerID:t,is_succeeded:r,displayType:1}})},openRecommendProfile:function(e){this.$router.push({name:"offerProfile",params:{userNum:e,displayType:2}})},openSubmittedProfile:function(e,t,r){this.$router.push({name:"offerProfile",params:{userNum:e,offerID:t,is_succeeded:r,displayType:3}})}}},v=m,h=(r(407),r(46)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("section",{staticClass:"mode"},[1!==e.displayType?r("button",{on:{click:e.change1}},[e._v("受信箱")]):e._e(),e._v(" "),1==e.displayType?r("button",{staticClass:"button_selected",on:{click:e.change1}},[e._v("受信箱")]):e._e(),e._v(" "),2!==e.displayType?r("button",{on:{click:e.change2}},[e._v("オススメ")]):e._e(),e._v(" "),2==e.displayType?r("button",{staticClass:"button_selected",on:{click:e.change2}},[e._v("オススメ")]):e._e(),e._v(" "),3!==e.displayType?r("button",{on:{click:e.change3}},[e._v("送信済み")]):e._e(),e._v(" "),3==e.displayType?r("button",{staticClass:"button_selected",on:{click:e.change3}},[e._v("送信済み")]):e._e()]),e._v(" "),1==e.displayType?r("div",[e.waitReceived?r("h3",{staticClass:"connecting"},[e._v("通信中...")]):e._e(),e._v(" "),!e.waitReceived&0==e.offersReceived.length?r("h3",{staticClass:"connecting"},[e._v("オファーが来るのを待ちましょう")]):e._e(),e._v(" "),e._l(e.offersReceived,(function(t){return r("div",[r("div",{on:{click:function(r){return e.openReceivedProfile(t.userNum,t.offerID,t.is_succeeded)}}},[r("OfferCard",{attrs:{offerReceived:t}})],1)])}))],2):e._e(),e._v(" "),2==e.displayType?r("div",[e.waitRecommend?r("h3",{staticClass:"connecting"},[e._v("通信中...")]):e._e(),e._v(" "),!e.waitRecommend&0==e.recommends.length?r("h3",{staticClass:"connecting"},[e._v("オススメがありません")]):e._e(),e._v(" "),e._l(e.recommends,(function(t){return r("div",[r("div",{on:{click:function(r){return e.openRecommendProfile(t.userNum)}}},[r("recommendCard",{attrs:{recommend:t}})],1)])}))],2):e._e(),e._v(" "),3==e.displayType?r("div",[e.waitSubmitted?r("h3",{staticClass:"connecting"},[e._v("通信中...")]):e._e(),e._v(" "),!e.waitSubmitted&0==e.offersSubmitted.length?r("h3",{staticClass:"connecting"},[e._v("返信を待ちましょう")]):e._e(),e._v(" "),e._l(e.offersSubmitted,(function(t){return r("div",[r("div",{on:{click:function(r){return e.openSubmittedProfile(t.userNum,t.offerID,t.is_succeeded)}}},[r("replyWait",{attrs:{offerSubmitted:t}})],1)])}))],2):e._e()])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("p",[e._v("OTA collab.")])])}],!1,null,"6e70ced0",null);t.default=component.exports;installComponents(component,{OfferCard:r(302).default})}}]);